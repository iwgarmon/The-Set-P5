<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
  <title>The Set â€“ Viewfinder / Edit (Auto Orientation)</title>

  <!-- Three.js + controls -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/TransformControls.js"></script>

  <style>
    *{margin:0;padding:0;box-sizing:border-box;}
    body{
      overflow:hidden;background:#000;color:#fff;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      user-select:none;-webkit-user-select:none;
      touch-action:none;
    }
    canvas{
      display:block;width:100vw !important;height:100vh !important;
      position:fixed;inset:0;
    }
    .hidden{display:none !important;}
    .ui-interactive{pointer-events:auto;}

    /* ---------- Studio UI ---------- */
    .studio-ui{position:fixed;inset:0;z-index:100;pointer-events:none;}
    .panel{
      pointer-events:auto;
      background:rgba(0,0,0,0.86);
      border:1px solid rgba(255,255,255,0.16);
      backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);
      border-radius:14px;
      box-shadow:0 10px 24px rgba(0,0,0,0.45);
    }
    .btn{
      pointer-events:auto;cursor:pointer;
      padding:10px 12px;font-size:11px;font-weight:900;
      letter-spacing:0.8px;text-transform:uppercase;
      border-radius:12px;border:1px solid rgba(255,255,255,0.18);
      background:rgba(255,255,255,0.04);color:#fff;
      transition:transform .08s, background .15s;
    }
    .btn:active{transform:scale(0.96);}
    .btn:hover{background:rgba(255,255,255,0.07);}

    body.viewfinder .studio-ui{display:none !important;}

    /* ---------- Viewfinder frame ---------- */
    .vf-frame{
      position:fixed;inset:0;z-index:90;pointer-events:none;
      border:24px solid rgba(0,0,0,0.95);
      opacity:0;transition:opacity .2s;
    }
    body.viewfinder .vf-frame{opacity:1;}

    /* ---------- Viewfinder overlays ---------- */
    #vignette,#grain,#dofBlur{
      position:fixed;inset:0;z-index:95;pointer-events:none;
      display:none;
    }
    body.viewfinder #vignette,
    body.viewfinder #grain,
    body.viewfinder #dofBlur{display:block;}

    #vignette{
      background:radial-gradient(circle at center, rgba(0,0,0,0) 55%, rgba(0,0,0,0.6) 100%);
      mix-blend-mode:multiply;opacity:0.55;
    }
    #grain{
      background-repeat:repeat;background-size:180px 180px;
      opacity:0;mix-blend-mode:overlay;filter:blur(0.25px);
    }

    /* ---- Better DOF feel: masked backdrop blur (center sharp-ish, edges blur) ----
       We drive these CSS vars from JS:
       --dof-blur:   blur amount in px
       --dof-r1:     inner (sharp) radius %
       --dof-r2:     feather outer radius %
       --dof-opacity opacity multiplier
    */
    #dofBlur{
      --dof-blur: 0px;
      --dof-r1: 38%;
      --dof-r2: 52%;
      --dof-opacity: 0.0;

      backdrop-filter: blur(var(--dof-blur));
      -webkit-backdrop-filter: blur(var(--dof-blur));

      /* Mask so blur applies mostly OUTSIDE center */
      -webkit-mask-image: radial-gradient(circle at 50% 45%,
        rgba(0,0,0,0) 0%,
        rgba(0,0,0,0) var(--dof-r1),
        rgba(0,0,0,1) var(--dof-r2),
        rgba(0,0,0,1) 100%);
      mask-image: radial-gradient(circle at 50% 45%,
        rgba(0,0,0,0) 0%,
        rgba(0,0,0,0) var(--dof-r1),
        rgba(0,0,0,1) var(--dof-r2),
        rgba(0,0,0,1) 100%);

      opacity: var(--dof-opacity);
      transition: opacity 120ms linear;
    }

    /* ---------- Viewfinder HUD (glowing yellow, rectangular) ---------- */
    .vf-hud{
      position:fixed;
      top:calc(env(safe-area-inset-top,0px) + 10px);
      left:calc(env(safe-area-inset-left,0px) + 10px);
      z-index:160;
      display:none;flex-direction:column;gap:8px;
      pointer-events:auto;
    }
    body.viewfinder .vf-hud{display:flex;}

    .vf-readout{
      padding:7px 10px;
      font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
      font-size:12px;letter-spacing:0.6px;
      border-radius:0px;
      background:rgba(0,0,0,0.14);
      color:#ffd64a;
      border:1px solid rgba(255,214,74,0.30);
      text-shadow:0 0 6px rgba(255,214,74,0.65), 0 0 14px rgba(255,214,74,0.35);
      box-shadow:inset 0 0 0 1px rgba(255,214,74,0.04);
      transition:all .12s;
    }
    .vf-active{
      border-color:rgba(255,214,74,0.92);
      box-shadow:0 0 12px rgba(255,214,74,0.14), inset 0 0 0 1px rgba(255,214,74,0.10);
      filter:brightness(1.15);
    }

    /* ---------- Zoom speaker box (top-right) ---------- */
    .vf-zoom{
      position:fixed;
      top:calc(env(safe-area-inset-top,0px) + 10px);
      right:calc(env(safe-area-inset-right,0px) + 10px);
      z-index:165;
      display:none;
      pointer-events:auto;
      width:190px;padding:10px 10px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.18);
      background:linear-gradient(180deg, rgba(0,0,0,0.65), rgba(0,0,0,0.92));
      box-shadow:0 10px 24px rgba(0,0,0,0.55), inset 0 0 0 1px rgba(255,255,255,0.05);
    }
    body.viewfinder .vf-zoom{display:block;}
    .vf-zoom-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;}
    .vf-zoom-title{
      font-size:10px;font-weight:950;letter-spacing:1px;text-transform:uppercase;
      color:#ffd64a;text-shadow:0 0 10px rgba(255,214,74,0.35);opacity:0.95;
    }
    .vf-grill{
      height:12px;border-radius:10px;
      background:repeating-linear-gradient(90deg,
        rgba(255,255,255,0.16) 0px,
        rgba(255,255,255,0.16) 2px,
        rgba(0,0,0,0.0) 2px,
        rgba(0,0,0,0.0) 6px
      );
      border:1px solid rgba(255,255,255,0.10);
      opacity:0.32;margin-bottom:8px;
    }
    #zoom-slider{width:100%;}
    #focus-slider{width:100%;}
    input[type="range"]{
      -webkit-appearance: none;
      appearance: none;
      height: 24px;
      background: transparent;
      cursor: pointer;
      touch-action: pan-x;
      pointer-events: auto;
    }
    input[type="range"]::-webkit-slider-runnable-track{
      height:6px;border-radius:999px;
      background:rgba(255,255,255,0.18);
      border:1px solid rgba(255,255,255,0.14);
    }
    input[type="range"]::-webkit-slider-thumb{
      -webkit-appearance:none;
      appearance:none;
      width:18px;height:18px;border-radius:50%;
      margin-top:-7px;
      background:#ffd64a;
      border:2px solid rgba(0,0,0,0.35);
      box-shadow:0 0 10px rgba(255,214,74,0.28);
    }

    /* ---------- Shutter ---------- */
    #shutter{
      position:fixed;left:50%;
      bottom:calc(env(safe-area-inset-bottom,0px) + 18px);
      transform:translateX(-50%);
      z-index:170;
      display:none;pointer-events:auto;
    }
    body.viewfinder #shutter{display:block;}
    .shutter-btn{
      width:72px;height:72px;
      border:4px solid #fff;border-radius:50%;
      padding:6px;background:transparent;cursor:pointer;
      transition:transform .08s;
    }
    .shutter-btn:active{transform:scale(0.93);}

    /* ---------- Sound ---------- */
    #sound{
      position:fixed;left:50%;
      bottom:calc(env(safe-area-inset-bottom,0px) + 100px);
      transform:translateX(-50%);
      z-index:171;
      display:none;pointer-events:auto;
    }
    body.viewfinder #sound{display:block;}
    .sound-btn{
      width:30px;height:30px;
      border-radius:50%;
      padding:6px;background:transparent;cursor:pointer;
      transition:transform .08s;
    }
    .sound-btn:active{transform:scale(0.93);}
  </style>
</head>
<body class="viewfinder">
  <div class="studio-ui hidden">
    <div class="panel">
      <div class="btn">Record</div>
      <div class="btn">Snap</div>
      <div class="btn">Settings</div>
    </div>
  </div>
  <div class="vf-frame"></div>
  <div id="vignette"></div>
  <div id="grain"></div>
  <div id="dofBlur"></div>

  <div class="vf-hud">
    <div class="vf-readout">Readout 1</div>
    <div class="vf-readout">Readout 2</div>
    <div class="vf-readout">Readout 3</div>
  </div>

  <div class="vf-zoom">
    <div class="vf-zoom-head">
      <div class="vf-zoom-title">Zoom</div>
      <div class="vf-zoom-title">Focus</div>
    </div>
    <input type="range" id="zoom-slider" min="1" max="100" value="50" />
    <input type="range" id="focus-slider" min="1" max="100" value="50" />
  </div>

  <div id="shutter" class="shutter-btn">Shutter</div>
  <div id="sound" class="sound-btn">Sound</div>

  <script>
    // Your JavaScript code here
  </script>
</body>
</html>